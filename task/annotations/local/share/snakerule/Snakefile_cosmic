include: "conf.sk"
#curl -H "Authorization: Basic ZW1haWxAZXhhbXBsZS5jb206bXljb3NtaWNwYXNzd29yZAo=" https://cancer.sanger.ac.uk/cosmic/file_download/GRCh38/cosmic/v87/VCF/CosmicCodingMuts.vcf.gz
#gives url for download
#curl "https://cog.sanger.ac.uk/cosmic/GRCh38/cosmic/v87/VCF/CosmicCodingMuts.vcf.gz?AWSAccessKeyId=KFGH85D9KLWKC34GSl88&Expires=1521726406&Signature=Jf834Ck0%8GSkwd87S7xkvqkdfUV8%3D"

# ssl is disabled in curl. lost patience, done by hand
rule:
    output: "{wanted}"
    params: URL=PATH+VERSION, secret=SECRET
    shell:
        """
          URL=`curl -H "Authorization: Basic {params.secret}" {params.URL}{output} | sed 's/:/\\t/1; s/}}$//;' | cut -f 2`
          echo $URL
          curl $URL --output {output}
        """
